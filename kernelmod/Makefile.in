
obj-m := spin.o
spin-objs := spin_kmod.o messaging.o pkt_info.o

KERNELPATH=@KERNELPATH@

ifndef KERNELPATH
	KERNELPATH := /lib/modules/$(shell uname -r)/build
endif


all: default

default: client
	$(MAKE) V=s -C $(KERNELPATH) M=$(PWD) modules

distclean: clean

clean:
	rm -rf *.o *.ko *.mod.* *.cmd .module* modules* Module* .*.cmd .tmp*
	make -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean

client:
	gcc client.c -o client
